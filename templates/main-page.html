<html>
    <head></head>
    <body>
    <div class="messages-container"></div>
        <h1 id="greeting"></h1>
        <button id="add-char-btn">Add Character</button>
        <h1>Characters:</h1>
        <p id="character-status"></p>
        <ul id="character-list"></ul>
    <script>
        const electron = require('electron');
        const ipcRenderer = electron.ipcRenderer;
        const characterListElement = document.getElementById('character-list');
        const os = require('os');

        document.getElementById('add-char-btn').addEventListener('click', () => {
            ipcRenderer.send('open:add-character-page');
        });

        document.getElementById('greeting').innerHTML = `Hello, ${os.hostname()}!`;

        const characterStatusElement = document.getElementById('character-status');

        ipcRenderer.on('character-fetch:in-progress', event => {
            characterStatusElement.innerHTML = 'Loading...';
            characterListElement.innerHTML = null;
        });

        ipcRenderer.on('render:characters', (event, characters) => {
            characterStatusElement.innerHTML = '';
            if (!Array.isArray(characters) || characters.length === 0) {
                return characterStatusElement.innerHTML =
                    'No Characters To Show. Click "Add Character" To Start Tracking One';
            }

            characterListElement.innerHTML = '';
            characters.forEach(character => {
                const li = document.createElement('li');
                const itemText = document.createTextNode(`${character.name} (${character.level}) / ${character.server}`);
                li.appendChild(itemText);
                characterListElement.appendChild(li);
            });
        });
    </script>
    </body>
</html>
